import{h as e,j as o,k as t,l as a,n as s,o as l,c as n,w as i,i as d,f as c,a as r,b as u,t as m,e as p,I as f,g as h}from"./index-4a91be04.js";import{u as g}from"./user.ae46aeeb.js";import{v as _}from"./validator.b79af65a.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./constants.90a8addf.js";import"./storage.b6dfcd1b.js";const C=w({data:()=>({form:{phone:"",code:"",password:""},loading:!1,countdown:0,timer:null}),methods:{goBack(){e()},sendCode(){const{valid:e,message:s}=_(this.form.phone);e?(t({title:"å‘é€ä¸­"}),setTimeout(()=>{a(),o({title:"éªŒè¯ç å·²å‘é€"}),this.countdown=60,this.timer=setInterval(()=>{this.countdown--,this.countdown<=0&&clearInterval(this.timer)},1e3)},1e3)):o({title:s,icon:"none"})},async handleLogin(){const e=_(this.form.phone);if(!e.valid)return o({title:e.message,icon:"none"});if(!this.form.code&&!this.form.password)return o({title:"è¯·è¾“å…¥éªŒè¯ç æˆ–å¯†ç ",icon:"none"});this.loading=!0;const t=g(),a=await t.login(this.form);this.loading=!1,a.success?(o({title:"ç™»å½•æˆåŠŸ"}),setTimeout(()=>{s({url:"/pages/auth/info-complete"})},1500)):o({title:a.message||"ç™»å½•å¤±è´¥",icon:"none"})},handleWechatLogin(){o({title:"å¾®ä¿¡ç™»å½•å¼€å‘ä¸­",icon:"none"})}},beforeDestroy(){this.timer&&clearInterval(this.timer)}},[["render",function(e,o,t,a,s,g){const _=p,w=f,C=d,b=h;return l(),n(C,{class:"page"},{default:i(()=>[c(" Content "),r(C,{class:"content"},{default:i(()=>[r(_,{class:"title"},{default:i(()=>[u("è´¦å·ç™»å½•")]),_:1}),r(C,{class:"form"},{default:i(()=>[c(" Phone "),r(C,{class:"input-group"},{default:i(()=>[r(_,{class:"input-icon"},{default:i(()=>[u("ğŸ“±")]),_:1}),r(w,{class:"input",type:"number",modelValue:s.form.phone,"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.phone=e),placeholder:"è¯·è¾“å…¥æ‰‹æœºå·",maxlength:"11"},null,8,["modelValue"])]),_:1}),c(" Code "),r(C,{class:"code-row"},{default:i(()=>[r(C,{class:"input-group flex-1"},{default:i(()=>[r(_,{class:"input-icon"},{default:i(()=>[u("ğŸ›¡ï¸")]),_:1}),r(w,{class:"input",type:"number",modelValue:s.form.code,"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.code=e),placeholder:"éªŒè¯ç ",maxlength:"6"},null,8,["modelValue"])]),_:1}),r(b,{class:"btn-code",disabled:s.countdown>0,onClick:g.sendCode},{default:i(()=>[u(m(s.countdown>0?`${s.countdown}s`:"è·å–éªŒè¯ç "),1)]),_:1},8,["disabled","onClick"])]),_:1}),c(" Password "),r(C,{class:"input-group"},{default:i(()=>[r(_,{class:"input-icon"},{default:i(()=>[u("ğŸ”’")]),_:1}),r(w,{class:"input",type:"password",modelValue:s.form.password,"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.password=e),placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["modelValue"])]),_:1}),r(b,{class:"btn-login",onClick:g.handleLogin,loading:s.loading},{default:i(()=>[u("ç™»å½•")]),_:1},8,["onClick","loading"])]),_:1}),r(C,{class:"flex-spacer"}),c(" WeChat Login "),r(C,{class:"wechat-login",onClick:g.handleWechatLogin},{default:i(()=>[r(C,{class:"wechat-icon-circle"},{default:i(()=>[r(_,{class:"wechat-icon"},{default:i(()=>[u("ğŸ’¬")]),_:1})]),_:1}),r(_,{class:"wechat-text"},{default:i(()=>[u("å¾®ä¿¡å¿«æ·ç™»å½•")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})}],["__scopeId","data-v-d6bf1e84"]]);export{C as default};
