import{h as t,j as e,D as o,o as s,c as a,w as n,i as l,a as i,b as d,t as c,f as r,d as u,e as f,I as m,H as h,g as p}from"./index-4a91be04.js";import{u as k}from"./notebook.afeb1fb1.js";import{S as _}from"./StatusBar.adc84dda.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import"./storage.b6dfcd1b.js";const N=b({components:{StatusBar:_},data:()=>({noteId:null,note:{title:"",content:""}}),computed:{notebookStore:()=>k(),isNew(){return!this.noteId}},onLoad(t){if(t.id){this.noteId=t.id;const e=this.notebookStore.getNoteById(this.noteId);e&&(this.note={...e})}},methods:{goBack(){t()},saveNote(){if(!this.note.content.trim())return e({title:"内容不能为空",icon:"none"});this.isNew?this.notebookStore.addNote(this.note):this.notebookStore.updateNote(this.noteId,this.note),e({title:"已保存"}),setTimeout(()=>{t()},500)},deleteNote(){o({title:"提示",content:"确定要删除这条笔记吗?",success:e=>{e.confirm&&(this.notebookStore.deleteNote(this.noteId),t())}})}}},[["render",function(t,e,o,k,_,b){const N=u("StatusBar"),I=f,S=l,g=m,v=h,C=p;return s(),a(S,{class:"page"},{default:n(()=>[i(N),i(S,{class:"header"},{default:n(()=>[i(S,{class:"back-btn",onClick:b.goBack},{default:n(()=>[i(I,{class:"back-icon"},{default:n(()=>[d("←")]),_:1})]),_:1},8,["onClick"]),i(I,{class:"title"},{default:n(()=>[d(c(b.isNew?"新建笔记":"编辑笔记"),1)]),_:1}),i(S,{class:"save-btn",onClick:b.saveNote},{default:n(()=>[i(I,{class:"save-text"},{default:n(()=>[d("保存")]),_:1})]),_:1},8,["onClick"])]),_:1}),i(S,{class:"content"},{default:n(()=>[i(g,{class:"title-input",modelValue:_.note.title,"onUpdate:modelValue":e[0]||(e[0]=t=>_.note.title=t),placeholder:"请输入标题"},null,8,["modelValue"]),i(v,{class:"content-input",modelValue:_.note.content,"onUpdate:modelValue":e[1]||(e[1]=t=>_.note.content=t),placeholder:"开始记录...",maxlength:"-1"},null,8,["modelValue"])]),_:1}),b.isNew?r("v-if",!0):(s(),a(S,{key:0,class:"footer"},{default:n(()=>[i(C,{class:"btn-delete",onClick:b.deleteNote},{default:n(()=>[d("删除笔记")]),_:1},8,["onClick"])]),_:1}))]),_:1})}],["__scopeId","data-v-3f93f056"]]);export{N as default};
