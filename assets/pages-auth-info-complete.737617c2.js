import{h as a,m as e,j as s,s as l,o as t,c as o,w as r,i as n,f as c,a as d,p as i,b as u,t as m,q as f,e as h,I as _,u as g,S as p,g as v}from"./index-4a91be04.js";import{u as j}from"./user.ae46aeeb.js";import{M as k,a as b,G as C}from"./constants.90a8addf.js";import{a as q,b as y,c as I}from"./validator.b79af65a.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";import"./storage.b6dfcd1b.js";const x=V({data:()=>({form:{avatar:"",realName:"",nickname:"",school:"",major:"",grade:"",studentId:""},schools:k,majors:b,grades:C,submitting:!1}),methods:{goBack(){a()},uploadAvatar(){e({count:1,success:a=>{this.form.avatar=a.tempFilePaths[0]}})},onSchoolChange(a){this.form.school=this.schools[a.detail.value]},onMajorChange(a){this.form.major=this.majors[a.detail.value].name},onGradeChange(a){this.form.grade=this.grades[a.detail.value].name},async handleSubmit(){if(!this.form.avatar)return s({title:"è¯·ä¸Šä¼ å¤´åƒ",icon:"none"});const a=q(this.form.realName);if(!a.valid)return s({title:a.message,icon:"none"});const e=y(this.form.nickname);if(!e.valid)return s({title:e.message,icon:"none"});if(!this.form.school)return s({title:"è¯·é€‰æ‹©å­¦æ ¡",icon:"none"});if(!this.form.major)return s({title:"è¯·é€‰æ‹©ä¸“ä¸š",icon:"none"});if(!this.form.grade)return s({title:"è¯·é€‰æ‹©å¹´çº§",icon:"none"});const t=I(this.form.studentId);if(!t.valid)return s({title:t.message,icon:"none"});this.submitting=!0;const o=j(),r=await o.updateProfile(this.form);this.submitting=!1,r.success?(s({title:"å®Œå–„æˆåŠŸ"}),setTimeout(()=>{l({url:"/pages/home/index"})},1500)):s({title:"æäº¤å¤±è´¥",icon:"none"})}}},[["render",function(a,e,s,l,j,k){const b=f,C=n,q=h,y=_,I=g,V=p,x=v;return t(),o(C,{class:"page"},{default:r(()=>[c(" Content "),d(V,{class:"content","scroll-y":""},{default:r(()=>[c(" Avatar "),d(C,{class:"avatar-section",onClick:k.uploadAvatar},{default:r(()=>[d(C,{class:i(["avatar-box",{"has-avatar":j.form.avatar}])},{default:r(()=>[j.form.avatar?(t(),o(b,{key:0,src:j.form.avatar,mode:"aspectFill",class:"avatar-img"},null,8,["src"])):(t(),o(C,{key:1,class:"camera-icon"},{default:r(()=>[u("ğŸ“·")]),_:1}))]),_:1},8,["class"]),d(q,{class:"avatar-tip"},{default:r(()=>[u("ç‚¹å‡»ä¸Šä¼ å¤´åƒ "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1})]),_:1},8,["onClick"]),c(" Basic Info "),d(C,{class:"section"},{default:r(()=>[d(C,{class:"section-header"},{default:r(()=>[d(C,{class:"section-mark"}),d(q,{class:"section-title"},{default:r(()=>[u("åŸºç¡€ä¿¡æ¯")]),_:1})]),_:1}),d(C,{class:"card"},{default:r(()=>[d(C,{class:"form-item"},{default:r(()=>[d(q,{class:"label"},{default:r(()=>[u("å§“å "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1}),d(y,{class:"input",type:"text",modelValue:j.form.realName,"onUpdate:modelValue":e[0]||(e[0]=a=>j.form.realName=a),placeholder:"è¯·è¾“å…¥çœŸå®å§“å"},null,8,["modelValue"])]),_:1}),d(C,{class:"form-item"},{default:r(()=>[d(q,{class:"label"},{default:r(()=>[u("æ˜µç§° "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1}),d(y,{class:"input",type:"text",modelValue:j.form.nickname,"onUpdate:modelValue":e[1]||(e[1]=a=>j.form.nickname=a),placeholder:"è¯·è¾“å…¥æ˜µç§°"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),c(" Academic Info "),d(C,{class:"section"},{default:r(()=>[d(C,{class:"section-header"},{default:r(()=>[d(C,{class:"section-mark"}),d(q,{class:"section-title"},{default:r(()=>[u("å­¦ç±ä¿¡æ¯")]),_:1})]),_:1}),d(C,{class:"card"},{default:r(()=>[c(" School "),d(I,{mode:"selector",range:j.schools,onChange:k.onSchoolChange},{default:r(()=>[d(C,{class:"form-item"},{default:r(()=>[d(q,{class:"label"},{default:r(()=>[u("å­¦æ ¡ "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1}),d(C,{class:i(["picker-value",{placeholder:!j.form.school}])},{default:r(()=>[u(m(j.form.school||"è¯·é€‰æ‹©å­¦æ ¡")+" ",1),d(q,{class:"arrow"},{default:r(()=>[u("â–¼")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["range","onChange"]),c(" Major "),d(I,{mode:"selector",range:j.majors,"range-key":"name",onChange:k.onMajorChange},{default:r(()=>[d(C,{class:"form-item"},{default:r(()=>[d(q,{class:"label"},{default:r(()=>[u("ä¸“ä¸š "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1}),d(C,{class:i(["picker-value",{placeholder:!j.form.major}])},{default:r(()=>[u(m(j.form.major||"è¯·é€‰æ‹©ä¸“ä¸š")+" ",1),d(q,{class:"arrow"},{default:r(()=>[u("â–¼")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["range","onChange"]),c(" Grade "),d(I,{mode:"selector",range:j.grades,"range-key":"name",onChange:k.onGradeChange},{default:r(()=>[d(C,{class:"form-item"},{default:r(()=>[d(q,{class:"label"},{default:r(()=>[u("å¹´çº§ "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1}),d(C,{class:i(["picker-value",{placeholder:!j.form.grade}])},{default:r(()=>[u(m(j.form.grade||"è¯·é€‰æ‹©å¹´çº§")+" ",1),d(q,{class:"arrow"},{default:r(()=>[u("â–¼")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["range","onChange"]),c(" Student ID "),d(C,{class:"form-item"},{default:r(()=>[d(q,{class:"label"},{default:r(()=>[u("å­¦å· "),d(q,{class:"required"},{default:r(()=>[u("*")]),_:1})]),_:1}),d(y,{class:"input",type:"text",modelValue:j.form.studentId,"onUpdate:modelValue":e[2]||(e[2]=a=>j.form.studentId=a),placeholder:"è¯·è¾“å…¥å­¦å·"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),d(C,{class:"footer-spacer"})]),_:1}),c(" Footer Button "),d(C,{class:"footer"},{default:r(()=>[d(x,{class:"btn-submit",onClick:k.handleSubmit,loading:j.submitting},{default:r(()=>[u("æäº¤ä¿¡æ¯")]),_:1},8,["onClick","loading"])]),_:1})]),_:1})}],["__scopeId","data-v-d12a2938"]]);export{x as default};
