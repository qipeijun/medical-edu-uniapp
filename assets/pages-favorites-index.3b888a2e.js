import{C as t,h as e,n as s,o as a,c as o,w as i,i as r,a as n,x as l,y as v,F as f,b as u,e as d,S as c,t as m,G as h}from"./index-4a91be04.js";import{g as p,s as _}from"./storage.b6dfcd1b.js";import{m as g}from"./questions.c06fdb8d.js";import{Q as F}from"./constants.90a8addf.js";import{_ as y}from"./_plugin-vue_export-helper.1b428a4d.js";const q="user_favorites",k=t("favorites",{state:()=>({favorites:[]}),getters:{favoriteCount:t=>t.favorites.length,favoriteQuestions:t=>t.favorites.map(t=>g.find(e=>e.id===t)||{id:t,content:"题目已失效"})},actions:{loadFavorites(){this.favorites=p(q,[])},addFavorite(t){this.favorites.includes(t)||(this.favorites.unshift(t),this.saveFavorites())},removeFavorite(t){this.favorites=this.favorites.filter(e=>e!==t),this.saveFavorites()},toggleFavorite(t){return this.favorites.includes(t)?(this.removeFavorite(t),!1):(this.addFavorite(t),!0)},isFavorite(t){return this.favorites.includes(t)},saveFavorites(){_(q,this.favorites)}}});const j=y({computed:{favStore:()=>k(),questions(){return this.favStore.favoriteQuestions}},onShow(){this.favStore.loadFavorites()},methods:{goBack(){e()},getTypeName(t){const e=Object.values(F).find(e=>e.code===t);return e?e.name:"题目"},goToQuestion(t){s({url:"/pages/study/question-detail"})},removeFav(t){this.favStore.removeFavorite(t)}}},[["render",function(t,e,s,p,_,g){const F=d,y=r,q=c;return a(),o(y,{class:"page"},{default:i(()=>[n(q,{class:"content","scroll-y":""},{default:i(()=>[g.questions.length>0?(a(),o(y,{key:0,class:"fav-list"},{default:i(()=>[(a(!0),l(f,null,v(g.questions,t=>(a(),o(y,{class:"fav-item",key:t.id,onClick:e=>g.goToQuestion(t.id)},{default:i(()=>[n(y,{class:"q-header"},{default:i(()=>[n(F,{class:"q-type"},{default:i(()=>[u(m(g.getTypeName(t.type)),1)]),_:2},1024)]),_:2},1024),n(F,{class:"q-content"},{default:i(()=>[u(m(t.content),1)]),_:2},1024),n(y,{class:"q-footer"},{default:i(()=>[n(F,{class:"q-date"},{default:i(()=>[u("收藏于 2026-01-04")]),_:1}),n(y,{class:"remove-btn",onClick:h(e=>g.removeFav(t.id),["stop"])},{default:i(()=>[u("取消收藏")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(a(),o(y,{key:1,class:"empty-state"},{default:i(()=>[n(F,{class:"empty-text"},{default:i(()=>[u("暂无收藏题目")]),_:1})]),_:1}))]),_:1})]),_:1})}],["__scopeId","data-v-217a3f6a"]]);export{j as default};
