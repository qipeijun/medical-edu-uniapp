import{o as e,c as t,w as s,a as n,b as o,t as a,p as r,f as i,i as l,e as c,h as u,j as d,x as p,y as f,F as h,d as _,S as m,g as x}from"./index-4a91be04.js";import{u as y}from"./question.89412873.js";import{S as C}from"./StatusBar.adc84dda.js";import{Q as b}from"./constants.90a8addf.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import"./questions.c06fdb8d.js";import"./storage.b6dfcd1b.js";import"./spaced-repetition.7378a4c3.js";const S=k({components:{StatusBar:C,OptionItem:k({name:"OptionItem",props:{option:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},isAnswered:{type:Boolean,default:!1}},computed:{statusClass(){return this.isAnswered?this.option.isCorrect?"correct":this.isSelected&&!this.option.isCorrect?"wrong":"normal":this.isSelected?"selected":"normal"},labelClass(){return this.isAnswered?this.option.isCorrect?"correct-label":this.isSelected&&!this.option.isCorrect?"wrong-label":"normal":this.isSelected?"selected-label":"normal"}},methods:{handleClick(){this.$emit("click",this.option)}}},[["render",function(u,d,p,f,h,_){const m=l,x=c;return e(),t(m,{class:r(["option-item",_.statusClass]),onClick:_.handleClick},{default:s(()=>[n(m,{class:r(["opt-label",_.labelClass])},{default:s(()=>[o(a(p.option.label),1)]),_:1},8,["class"]),n(x,{class:"opt-text"},{default:s(()=>[o(a(p.option.text),1)]),_:1}),"correct"===_.statusClass?(e(),t(x,{key:0,class:"result-icon correct"},{default:s(()=>[o("âœ“")]),_:1})):i("v-if",!0),"wrong"===_.statusClass?(e(),t(x,{key:1,class:"result-icon wrong"},{default:s(()=>[o("âœ•")]),_:1})):i("v-if",!0)]),_:1},8,["class","onClick"])}],["__scopeId","data-v-07a7cac9"]]),ExplanationPanel:k({name:"ExplanationPanel",props:{content:{type:String,default:""},initExpanded:{type:Boolean,default:!0}},data(){return{expanded:this.initExpanded}},methods:{toggle(){this.expanded=!this.expanded}}},[["render",function(r,u,d,p,f,h){const _=c,m=l;return e(),t(m,{class:"explanation-panel"},{default:s(()=>[n(m,{class:"exp-header",onClick:h.toggle},{default:s(()=>[n(_,{class:"exp-title"},{default:s(()=>[o("æŸ¥çœ‹è§£æž")]),_:1}),n(_,{class:"exp-arrow"},{default:s(()=>[o(a(f.expanded?"â–²":"â–¼"),1)]),_:1})]),_:1},8,["onClick"]),f.expanded?(e(),t(m,{key:0,class:"exp-content"},{default:s(()=>[n(_,{class:"exp-label"},{default:s(()=>[o("ã€è§£æžã€‘")]),_:1}),n(_,{class:"exp-text"},{default:s(()=>[o(a(d.content),1)]),_:1})]),_:1})):i("v-if",!0)]),_:1})}],["__scopeId","data-v-5a4f0783"]])},data:()=>({mode:"study",questionTypes:Object.values(b)}),computed:{questionStore:()=>y(),currentQuestion(){return this.questionStore.currentQuestion},currentIndex(){return this.questionStore.currentQuestionIndex},totalCount(){return this.questionStore.totalQuestions},hasPrevious(){return this.questionStore.hasPrevious},currentCategoryName(){var e;return this.questionStore.currentCategory?null==(e=this.questionStore.currentSubject.categories.find(e=>e.id===this.questionStore.currentCategory))?void 0:e.name:this.questionStore.currentSubject?this.questionStore.currentSubject.name:""},currentType(){return this.currentQuestion?this.currentQuestion.type:""},currentTypeName(){const e=Object.values(b).find(e=>e.code===this.currentType);return e?e.name:"æœªçŸ¥é¢˜åž‹"},userAnswerRecord(){return this.currentQuestion?this.questionStore.userAnswers[this.currentQuestion.id]:null},isAnswered(){return!!this.userAnswerRecord}},methods:{goBack(){u()},toggleMode(){this.mode="study"===this.mode?"exam":"study"},isSelected(e){if(!this.userAnswerRecord)return!1;const t=this.userAnswerRecord.answer;return Array.isArray(t)?t.includes(e.label):t===e.label},handleOptionClick(e){this.isAnswered||"TYPE_A"===this.currentQuestion.type&&this.questionStore.submitAnswer(this.currentQuestion.id,e.label)},prevQuestion(){this.questionStore.previousQuestion()},nextQuestion(){this.questionStore.nextQuestion()},toggleFavorite(){this.questionStore.toggleFavorite(this.currentQuestion.id)},reportError(){d({title:"çº é”™åŠŸèƒ½å¼€å‘ä¸­",icon:"none"})}}},[["render",function(u,d,y,C,b,k){const S=_("StatusBar"),g=c,w=l,v=m,Q=_("OptionItem"),q=_("ExplanationPanel"),A=x;return e(),t(w,{class:"page"},{default:s(()=>[n(S),i(" Header "),n(w,{class:"header"},{default:s(()=>[n(w,{class:"back-btn",onClick:k.goBack},{default:s(()=>[n(g,{class:"back-icon"},{default:s(()=>[o("â†")]),_:1})]),_:1},8,["onClick"]),n(g,{class:"header-title"},{default:s(()=>[o(a(k.currentCategoryName||"ç­”é¢˜"),1)]),_:1}),n(w,{class:"mode-switch"},{default:s(()=>[n(g,{class:"mode-text"},{default:s(()=>[o("åšé¢˜æ¨¡å¼")]),_:1}),n(w,{class:r(["switch",{active:"study"===b.mode}]),onClick:k.toggleMode},{default:s(()=>[n(w,{class:"switch-handle"})]),_:1},8,["class","onClick"])]),_:1})]),_:1}),i(" Type Tabs "),n(v,{class:"type-tabs","scroll-x":"","scroll-into-view":"tab-"+k.currentType},{default:s(()=>[(e(!0),p(h,null,f(b.questionTypes,n=>(e(),t(w,{class:r(["tab-item",{active:k.currentType===n.code}]),key:n.code,id:"tab-"+n.code},{default:s(()=>[o(a(n.name),1)]),_:2},1032,["id","class"]))),128))]),_:1},8,["scroll-into-view"]),i(" Content "),k.currentQuestion?(e(),t(v,{key:0,class:"content","scroll-y":""},{default:s(()=>[i(" Progress "),n(w,{class:"progress-info"},{default:s(()=>[n(w,{class:"count"},{default:s(()=>[n(g,{class:"current"},{default:s(()=>[o(a(k.currentIndex+1),1)]),_:1}),n(g,{class:"total"},{default:s(()=>[o("/"+a(k.totalCount),1)]),_:1})]),_:1}),n(g,{class:"type-label"},{default:s(()=>[o(a(k.currentTypeName),1)]),_:1})]),_:1}),i(" Question "),n(w,{class:"question-text"},{default:s(()=>[o(a(k.currentQuestion.content),1)]),_:1}),i(" Options "),n(w,{class:"options-list"},{default:s(()=>[(e(!0),p(h,null,f(k.currentQuestion.options,s=>(e(),t(Q,{key:s.label,option:s,isSelected:k.isSelected(s),isAnswered:k.isAnswered,onClick:k.handleOptionClick},null,8,["option","isSelected","isAnswered","onClick"]))),128))]),_:1}),i(" Explanation "),k.isAnswered||"study"===b.mode?(e(),t(q,{key:0,content:k.currentQuestion.explanation.text},null,8,["content"])):i("v-if",!0),n(w,{class:"footer-spacer"})]),_:1})):(e(),t(w,{key:1,class:"empty-state"},{default:s(()=>[n(g,null,{default:s(()=>[o("æš‚æ— é¢˜ç›®")]),_:1})]),_:1})),i(" Bottom Actions "),n(w,{class:"footer-actions"},{default:s(()=>[n(w,{class:r(["action-btn",{disabled:!k.hasPrevious}]),onClick:k.prevQuestion},{default:s(()=>[n(g,{class:"icon"},{default:s(()=>[o("â¬…ï¸")]),_:1}),n(g,{class:"text"},{default:s(()=>[o("ä¸Šä¸€é¢˜")]),_:1})]),_:1},8,["onClick","class"]),n(w,{class:"action-btn",onClick:k.toggleFavorite},{default:s(()=>[n(g,{class:"icon"},{default:s(()=>[o("â­")]),_:1}),n(g,{class:"text"},{default:s(()=>[o("æ”¶è—")]),_:1})]),_:1},8,["onClick"]),n(w,{class:"action-btn",onClick:k.reportError},{default:s(()=>[n(g,{class:"icon"},{default:s(()=>[o("ðŸ“")]),_:1}),n(g,{class:"text"},{default:s(()=>[o("çº é”™")]),_:1})]),_:1},8,["onClick"]),n(A,{class:"btn-next",onClick:k.nextQuestion},{default:s(()=>[o("ä¸‹ä¸€é¢˜")]),_:1},8,["onClick"])]),_:1})]),_:1})}],["__scopeId","data-v-35f2e3b6"]]);export{S as default};
