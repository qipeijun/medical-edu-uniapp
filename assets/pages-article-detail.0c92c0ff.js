import{C as e,h as t,j as l,r as a,o as i,c as s,w as r,i as c,a as o,b as n,t as d,f as u,p as f,x as h,y as k,F as m,d as p,e as g,J as _,S as A}from"./index-4a91be04.js";import{m as S,g as C}from"./articles.71e3ebd0.js";import{S as b}from"./StatusBar.adc84dda.js";import{f as v}from"./date.4f28c945.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";const L=e("article",{state:()=>({articles:S,currentArticle:null}),actions:{loadArticle(e){const t=C(e);t&&(this.currentArticle=t)},toggleLike(e){const t=this.articles.find(t=>t.id===e);t&&(t.isLiked=!t.isLiked,t.likeCount+=t.isLiked?1:-1,this.currentArticle&&this.currentArticle.id===e&&(this.currentArticle.isLiked=t.isLiked,this.currentArticle.likeCount=t.likeCount))}}});const y=x({components:{StatusBar:b},data:()=>({articleId:null,isScrolled:!1}),computed:{articleStore:()=>L(),article(){return this.articleStore.currentArticle},formattedContent(){if(!this.article)return"";return this.article.content.replace(/^# (.*$)/gim,'<h1 style="font-size: 24px; font-weight: bold; margin: 20px 0;">$1</h1>').replace(/^## (.*$)/gim,'<h2 style="font-size: 20px; font-weight: bold; margin: 16px 0; color: #333;">$1</h2>').replace(/^### (.*$)/gim,'<h3 style="font-size: 18px; font-weight: bold; margin: 12px 0;">$1</h3>').replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\n/gim,"<br/>")},relatedArticles(){return this.article?this.articleStore.articles.filter(e=>this.article.relatedArticles&&this.article.relatedArticles.includes(e.id)):[]}},onLoad(e){this.articleId=e.id,this.articleStore.loadArticle(this.articleId)},methods:{goBack(){t()},onScroll(e){this.isScrolled=e.detail.scrollTop>50},formatDate:e=>v(e,"YYYY-MM-DD"),toggleLike(){this.articleStore.toggleLike(this.articleId)},shareArticle(){l({title:"é“¾æŽ¥å·²å¤åˆ¶",icon:"none"})},goToArticle(e){a({url:`/pages/article/detail?id=${e}`})}}},[["render",function(e,t,l,a,S,C){const b=p("StatusBar"),v=g,x=c,L=_,y=A;return i(),s(x,{class:"page"},{default:r(()=>[o(b),o(x,{class:f(["header",{scrolled:S.isScrolled}])},{default:r(()=>[o(x,{class:"back-btn",onClick:C.goBack},{default:r(()=>[o(v,{class:"back-icon"},{default:r(()=>[n("â†")]),_:1})]),_:1},8,["onClick"]),S.isScrolled?(i(),s(v,{key:0,class:"header-title"},{default:r(()=>{var e;return[n(d(null==(e=C.article)?void 0:e.title),1)]}),_:1})):u("v-if",!0),o(x,{class:"action-btn",onClick:C.shareArticle},{default:r(()=>[o(v,{class:"action-icon"},{default:r(()=>[n("ðŸ”—")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["class"]),C.article?(i(),s(y,{key:0,class:"content","scroll-y":"",onScroll:C.onScroll},{default:r(()=>[o(x,{class:"article-header"},{default:r(()=>[o(v,{class:"title"},{default:r(()=>[n(d(C.article.title),1)]),_:1}),o(x,{class:"meta"},{default:r(()=>[o(v,{class:"author"},{default:r(()=>[n(d(C.article.author),1)]),_:1}),o(v,{class:"date"},{default:r(()=>[n(d(C.formatDate(C.article.publishDate)),1)]),_:1})]),_:1})]),_:1}),u(" Using rich-text for simple markdown-like rendering (assuming content is converted or simple) "),u(" In a real app, a markdown parser would be used "),o(x,{class:"article-body"},{default:r(()=>[o(L,{nodes:C.formattedContent},null,8,["nodes"])]),_:1}),o(x,{class:"article-footer"},{default:r(()=>[o(x,{class:"read-count"},{default:r(()=>[n("é˜…è¯» "+d(C.article.viewCount),1)]),_:1}),o(x,{class:f(["like-btn",{active:C.article.isLiked}]),onClick:C.toggleLike},{default:r(()=>[o(v,{class:"like-icon"},{default:r(()=>[n("ðŸ‘")]),_:1}),o(v,{class:"like-count"},{default:r(()=>[n(d(C.article.likeCount),1)]),_:1})]),_:1},8,["class","onClick"])]),_:1}),C.relatedArticles.length>0?(i(),s(x,{key:0,class:"related-section"},{default:r(()=>[o(x,{class:"section-title"},{default:r(()=>[n("ç›¸å…³æŽ¨è")]),_:1}),(i(!0),h(m,null,k(C.relatedArticles,e=>(i(),s(x,{class:"related-item",key:e.id,onClick:t=>C.goToArticle(e.id)},{default:r(()=>[o(v,{class:"item-title"},{default:r(()=>[n(d(e.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):u("v-if",!0),o(x,{class:"footer-spacer"})]),_:1},8,["onScroll"])):u("v-if",!0)]),_:1})}],["__scopeId","data-v-c0a99f62"]]);export{y as default};
