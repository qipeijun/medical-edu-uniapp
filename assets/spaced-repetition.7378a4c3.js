import{P as e}from"./constants.90a8addf.js";function t(e,t){const{reviewCount:n=0,easeFactor:r=2.5,interval:o=1}=e;let a=r,s=o,u=n;a=Math.max(1.3,r+(.1-(5-t)*(.08+.02*(5-t)))),t<3?(s=1,u=0):(s=0===n?1:1===n?6:Math.round(o*a),u=n+1),s=Math.min(s,180);const c=new Date;return c.setDate(c.getDate()+s),c.setHours(0,0,0,0),{nextReviewDate:c.toISOString(),newInterval:s,newEaseFactor:Number(a.toFixed(2)),newReviewCount:u}}function n(e){return(new Date).setHours(0,0,0,0),e.filter(e=>!(!e.reviewSchedule||!e.reviewSchedule.nextReviewDate)&&function(e){if(!e)return!1;const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),n<=t}(e.reviewSchedule.nextReviewDate)).sort((e,t)=>{const n=e.wrongCount||0,r=t.wrongCount||0;if(n!==r)return r-n;return new Date(e.reviewSchedule.nextReviewDate)-new Date(t.reviewSchedule.nextReviewDate)})}function r(t,n,r=!1){return t?r?e.CORRECT_AFTER_HINT:n<10?e.CORRECT_FIRST_TRY:n<30?e.CORRECT_WITH_HESITATION:e.CORRECT_AFTER_HINT:e.WRONG_COMPLETELY}function o(e){const t=e.length,n=e.filter(e=>e.isCompleted).length,r=t>0?Math.round(n/t*100):0,o={};e.forEach(e=>{const t=e.subjectId||e.subject;o[t]||(o[t]={subjectId:t,subjectName:e.subjectName||"",total:0,completed:0}),o[t].total++,e.isCompleted&&o[t].completed++});return{total:t,completed:n,remaining:t-n,progress:r,bySubject:Object.values(o).map(e=>({...e,progress:e.total>0?Math.round(e.completed/e.total*100):0}))}}export{o as a,t as b,r as c,n as g};
